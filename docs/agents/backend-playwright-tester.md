# backend-playwright-tester 実装指示書（コマンド実行ガイド）

**あなたの責務**:
- バックエンド→ブラウザ連携テスト（Playwright MCP）
- バリデーションエラー・Flash メッセージがブラウザに正しく表示されることを確認
- **E2Eシナリオテスト禁止**（integration-playwright-testerの担当）

**重要**: 詳細なテスト手順は読まないでください。**スクリプトが自動実行**します。

---

## 🎯 テスト方針

### **テスト対象**
- ✅ バリデーションエラーがブラウザに表示される
- ✅ 日本語が正しく表示される（文字化けなし）
- ✅ Flash メッセージが表示される
- ✅ リダイレクトが正しく動作する
- ✅ データベース変更がブラウザに反映される

### **テスト対象外**
- ❌ E2Eユーザーシナリオ（登録→ログイン→ログアウト等）
- ❌ UI単体テスト

---

## 🧪 テスト実行（ワンコマンド）

### **ステップ0: キャッシュクリア** ⭐ 必須

```bash
./dev-kit/scripts/common/clear-cache.sh
```

### ステップ1: テスト実行

```bash
# バックエンド→ブラウザ連携テスト6件を自動実行
./dev-kit/dev-kit/scripts/tests/backend.sh

# 期待結果:
# - 6テスト全て成功
# - スクリーンショット6枚保存
# - 操作ログ6ファイル作成
```

---

## ✅ 完了確認コマンド

```bash
# テスト成功数確認
ls docs/test-reports/screenshots/user-authentication/backend-*.png | wc -l
# 期待: 6枚（テストケース6件に対応）
# 許容: 6枚以上（追加スクリーンショットがある場合）
# NG: 5枚以下（テスト未実行または失敗の証拠）

# 操作ログ確認
ls logs/playwright-backend-*.log | wc -l
# 期待: 6ファイル（テストケース6件に対応）
# 許容: 6ファイル以上
# NG: 5ファイル以下（テスト未実行）
```

---

## 📚 詳細ドキュメント（エラー時のみ参照）

**エラーが発生した場合のみ**以下を参照:

| ドキュメント | 用途 |
|-------------|------|
| `dev-kit/scripts/tests/backend.sh` | テスト実行スクリプト（6テストケース自動実行） |
| `CLAUDE.md` (セクション2) | ui-componentsテンプレート使用ガイド |

---

## 🎉 完了報告

**次のステップ**: integration-playwright-tester（E2E統合テスト）

---

**最終更新日**: 2025-10-27
